# ProjectorSimulator

<br>Mac 64bit release 모드에서 실행한다.
<br>실행하면 3차원 그리드가 그려진 3차원 공간을 둘러볼 수 있다.
<br>공간에 3D 모델링 파일과 비디오 파일을 열 수 있다.
<br>별도의 윈도우 창을 통해 현재 재생되는 비디오 이미지를 마우스로 왜곡시키며
<br>왜곡된 비디오 영상은 실시간으로 프로젝션 맵핑에 적용이 된다.</br>

- Projector.h, cpp 설명
<br>Projector 클래스는 프로젝터 기계를 의미
<br>XYZ좌표이동과 XYZ축회전 가능
<br>실제 프로젝터의 스펙을 멤버변수로 이용할 예정
<br>각 프로젝터마다 개별적으로 사용할 영상을 파일 다이얼로그로 골라서 지정</br>

- MappingApp.h, cpp 설명
<br>MappingApp 클래스는 비디오 영상을 왜곡시킬 작업공간이다.
<br>특정 프로젝터에 지정되어 재생되는 비디오 영상을 윈도우 공간에 그림
<br>윈도우 공간에 그려진 비디오 영상의 4개 꼭지점을 마우스를 통해 드래그하여 조정시켜 영상을 왜곡</br>

- 현 구현상황
<br>기본 제공된 ofEasyCam으로 free camera 구현
<br>projector 오브젝트는 마우스로 선택이 가능. 선택된 프로젝터의 숫자가 좌측상단에 표시
<br>빔 프로젝터를 통해 영상을 쏜다는 느낌으로 시뮬레이션
<br>그림자 맵핑을 통해 세부적인 텍스쳐 영역 처리
<br>광원 맵핑을 통해 세부적인 텍스쳐 영역 처리
<br>다중 프로젝터 운영에 대한 렌더링 처리(최대 7대 한정)
<br>영상자체를 왜곡시켜 이를 실시간으로 반영</br>

- 테스트 방법
<br>1. 'F'키를 눌러 파일 다이얼로그를 통해 3D 모델링 파일을 불러와 3차원 공간에 렌더링
<br>    단, 현재 모델링 파일의 세부적인 좌표위치 및 축회전을 적용할 수 없어서 프로그램상 임의로 고정된 값을 이용
<br>    현재 불러올 수 있는 모델 확장자 - 3ds,ase,dxf,hmp,md2,md3,md5,mdc,mdl,nff,ply,stl,x,lwo,obj,smd,collada
<br>
<br>2. 'P'키를 눌러 프로젝터 오브젝트를 생성한다.
<br>    단, 현재 동시에 가동할 수 있는 프로젝터 오브젝트는 7대가 한계
<br>
<br>3. 마우스를 이용해 3차원 상의 프로젝터를 1대 선택한다.
<br>   선택된 프로젝터 오브젝트를 다시 선택하면 선택이 해제된다.
<br>   3차원 내에 있는 프로젝터 오브젝트를 마우스로 클릭하면 좌측에 있는 패널을 통해 XYZ좌표 이동 및 XYZ축 회전이 가능</br>
<br>
<br>4. 프로젝터를 선택한 상태에서 'V'키를 눌러 파일 다이얼로그를 통해 비디오 파일을 불러와 프로젝터를 통해 렌더링
<br>    비디오가 프로젝터에 지정되면 곧바로 영상이 모델링에 맵핑되어 입혀진다.
<br>    현재 불러올 수 있는 비디오 확장자 - mov,mp4,avi
<br>
<br>5. 우측에 있는 별도의 윈도우 창에서 비디오 텍스쳐의 꼭지점을 마우스로 드래그하여 왜곡
<br>   단, 프로젝터 1대가 반드시 선택되어 있는 상태여야 하며 프로젝터 1대씩만 영상 왜곡을 테스트 할 수 있음
<br>   왜곡된 영상이 실시간으로 적용되어 맵핑이 되는것을 확인할 수 있으나 다른 프로젝터를 선택하거나 하면 원상태로 돌아옴</br>

- TODO
1. 도량 통일 : 좌표계에서의 1씩 이동을 실세계의 몇cm,m로 환산할지? -> 현재는 좌표상의 1이동을 1cm로 지정할 예정
2. 3D 모델링을 관리할 클래스 구현(Projector 클래스처럼, Scale, Translate, Rotate 기능필수) -> 모델링을 움직일 필요성이 있는지의 이유로 보류됨
3. Projector 객체의 비디오 플레이백 기능 구현(GUI 패널에서 버튼 클릭?)
4. Projector의 성능에따른 보다 객관적인 FOV값 계산법 구현하기
5. Projector 및 3D 모델링에 쓰일 GIZMO 구현
6. easyCam 이용을 보다 쉽게(마우스 이동을 포함해서 키보드로까지)
7. mappingApp을 통해 왜곡된 영상을 프로젝터를 선택해제해도 유지되게끔 시나리오 설계
